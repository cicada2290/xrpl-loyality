# AccountSet

`AccountSet` トランザクションは、Xahau内のアカウントプロパティを変更します。

| フィールド | JSONタイプ | 内部タイプ | 説明 |
| --------- | ---------- | ---------- | ---- |
| ClearFlag | Number | UInt32 | （任意）このアカウントの無効にするフラグの一意の識別子。 |
| Domain | String | Blob | （任意）このアカウントを所有するドメイン。小文字のASCIIを表す16進数の文字列として、256バイトを超えることはできません。 |
| EmailHash | String | Hash128 | （任意）任意の128ビット値。通常、クライアントはこれをGravatar画像を表示するためのメールアドレスのmd5ハッシュとして扱います。 |
| MessageKey | String | Blob | （任意）このアカウントに暗号化されたメッセージを送信するための公開鍵。キーを設定するには、最初のバイトがキーの種類を示す33バイトである必要があります：secp256k1キーの場合は0x02または0x03、Ed25519キーの場合は0xED。キーを削除するには、空の値を使用します。 |
| NFTokenMinter | String | Blob | （任意）あなたのためにNFTokensを発行できる別のアカウント。（[NonFungibleTokensV1_1改正][]によって追加されました。） |
| SetFlag | Number | UInt32 | （任意）このアカウントに対して有効にする整数フラグ。 |
| TransferRate | Number | UInt32 | （任意）ユーザーがこのアカウントのトークンを転送する際に課される手数料。単位の10億分の1として表されます。2000000000を超えることはできず、1000000000未満にすることもできませんが、特別なケースとして0は手数料なしを意味します。 |
| TickSize | Number | UInt8 | （任意）このアドレスが発行する通貨に関与するオファーに使用するティックサイズ。これらのオファーの為替レートは、この桁数に丸められます。有効な値は3から15までの範囲で、0は無効化を意味します。（[TickSize改正][]によって追加されました。） |
| WalletLocator | String | Hash256 | （任意）任意の256ビット値。指定された場合、この値はアカウントの一部として保存されますが、固有の意味や要件はありません。 |
| WalletSize | Number | UInt32 | （任意）使用されていません。このフィールドはAccountSetトランザクションで有効ですが、何も行いません。 |

もしこれらのオプションが提供されない場合、AccountSetトランザクションは（トランザクションコストを消費する以外に）効果がありません。詳細は「トランザクションのキャンセルまたはスキップ」を参照してください。

### ドメイン
Domainフィールドは、ドメインの小文字のASCIIを表す16進数の文字列として表されます。例えば、ドメインexample.comは"6578616D706C652E636F6D"として表されます。

アカウントからDomainフィールドを削除するには、Domainを空の文字列に設定したAccountSetを送信します。

アカウントのDomainフィールドには任意のドメインを設定できます。アカウントとドメインが同じ個人または企業に属していることを証明するには、「双方向リンク」が必要です：

- 所有するアカウントには、Domainフィールドに所有するドメインを設定します。
- そのドメインで、所有するアカウントをリストしたxah-ledger.tomlファイルをホストし、Xahauの使用方法に関する他の情報をオプションで追加します。

### AccountSetフラグ
アカウントには有効または無効にできるいくつかのオプションがあります。アカウントオプションは、状況に応じて異なるタイプのフラグで表されます：

- `AccountSet`トランザクションタイプには、`SetFlag`パラメータとして渡されたときにオプションを有効にし、`ClearFlag`パラメータとして渡されたときにオプションを無効にするいくつかの「AccountSetフラグ」（asfプレフィックス付き）があります。新しいオプションはこのスタイルのフラグのみを持っています。トランザクションごとに1つのasfフラグを有効にし、1つのasfフラグを無効にすることができます。

- `AccountSet`トランザクションタイプには、`Flags`パラメータに渡されたときに特定のアカウントオプションを有効または無効にするために使用できるいくつかのトランザクションフラグ（tfプレフィックス付き）があります。複数のtfフラグを使用して1つのトランザクションで設定の組み合わせを有効または無効にできますが、すべての設定にtfフラグがあるわけではありません。

- `AccountRoot`台帳オブジェクトタイプには、特定の台帳内の特定のアカウントオプションの状態を表すいくつかの台帳状態フラグ（lsfプレフィックス付き）があります。これらの設定は、トランザクションがそれらを変更するまで適用されます。

AccountSetトランザクションのSetFlagおよびClearFlagパラメータを使用して、アカウントフラグを有効または無効にします。AccountSetフラグの名前はasfで始まります。

すべてのフラグはデフォルトで無効です。

利用可能なAccountSetフラグは次のとおりです：

| フラグ名 | 10進値 | 対応する台帳フラグ | 説明 |
| -------- | ------ | ----------------- | ---- |
| asfAccountTxnID | 5 | （なし） | このアカウントの最新のトランザクションのIDを追跡します。AccountTxnIDに必要です。 |
| asfAuthorizedNFTokenMinter | 10 | （なし） | 他のアカウントがこのアカウントの代わりに非代替トークン（NFTokens）を発行できるようにします。AccountRootオブジェクトのNFTokenMinterフィールドに認可されたアカウントを指定します。認可されたミンターを削除するには、このフラグを有効にし、NFTokenMinterフィールドを省略します。（[NonFungibleTokensV1_1改正][]によって追加されました。） |
| asfDefaultRipple | 8 | lsfDefaultRipple | デフォルトでこのアカウントの信頼ラインにリップリングを有効にします。 |
| asfDepositAuth | 9 | lsfDepositAuth | このアカウントに入金認証を有効にします。（[DepositAuth改正][]によって追加されました。） |
| asfDisableMaster | 4 | lsfDisableMaster | マスターキーのペアの使用を禁止します。通常のキーまたは署名者リストなど、トランザクションを署名するための他の方法が設定されている場合にのみ有効にできます。 |
| asfDisallowIncomingCheck | 13 | lsfDisallowIncomingCheck | 受信チェックをブロックします。[DisallowIncoming改正][]によって追加されました。 |
| asfDisallowIncomingNFTokenOffer | 12 | lsfDisallowIncomingNFTokenOffer | 受信NFTokenOffersをブロックします。[DisallowIncoming改正][]によって追加されました。 |
| asfDisallowIncomingPayChan | 14 | lsfDisallowIncomingPayChan | 受信支払いチャネルをブロックします。[DisallowIncoming改正][]によって追加されました。 |
| asfDisallowIncomingTrustline | 15 | lsfDisallowIncomingTrustline | 受信信頼ラインをブロックします。[DisallowIncoming改正][]によって追加されました。 |
| asfDisallowIncomingRemit | 16 | lsfDisallowIncomingRemit | 受信送金トランザクションをブロックします。[Remit改正][]によって追加されました。 |
| asfDisallowXRP | 3 | lsfDisallowXRP | XAHをこのアカウントに送信しないでください。（アドバイザリー；Xahauプロトコルでは強制されません。） |
| asfGlobalFreeze | 7 | lsfGlobalFreeze | このアカウントが発行するすべての資産を凍結します。 |
| asfNoFreeze | 6 | lsfNoFreeze | 個々の信頼ラインを凍結する能力を永久に放棄するか、グローバルフリーズを無効にします。このフラグは有効にされた後、無効にすることはできません。 |
| asfRequireAuth | 2 | lsfRequireAuth | このアドレスが発行する残高を保持するためにユーザーに認証を要求します。アドレスに接続された信頼ラインがない場合にのみ有効にできます。 |
| asfRequireDest | 1 | lsfRequireDestTag | このアカウントにトランザクションを送信するために宛先タグを要求します。 |
| asfTshCollect | 11 | lsfTshCollect | TSHが独自のフックチェーンの実行に対して支払います。[Hooks改正][]によって追加されました。 |

asfDisableMasterまたはasfNoFreezeフラグを有効にするには、トランザクションをマスターキーのペアで署名して認可する必要があります。通常のキーのペアやマルチ署名を使用することはできません。asfDisableMasterを無効にする（つまり、マスターキーのペアを再有効にする）には、通常のキーのペアまたはマルチ署名を使用できます。

AccountSetトランザクションタイプに特有の次のトランザクションフラグ（tfフラグ）は、同じ目的を果たします。スペースが限られているため、一部の設定には関連するtfフラグがなく、新しいtfフラグはAccountSetトランザクションタイプに追加されていません。単一のトランザクションで複数の設定を有効にするために、tfフラグとasfフラグの組み合わせを使用できます。

| フラグ名 | 16進値 | 10進値 | AccountSetフラグで置き換え |
| -------- | ------ | ------ | -------------------------- |
| tfRequireDestTag | 0x00010000 | 65536 | asfRequireDest（SetFlag） |
| tfOptionalDestTag | 0x00020000 | 131072 | asfRequireDest（ClearFlag） |
| tfRequireAuth | 0x00040000 | 262144 | asfRequireAuth（SetFlag） |
| tfOptionalAuth | 0x00080000 | 524288 | asfRequireAuth（ClearFlag） |
| tfDisallowXRP | 0x00100000 | 1048576 | asfDisallowXRP（SetFlag） |
| tfAllowXRP | 0x00200000 | 2097152 | asfDisallowXRP（ClearFlag） |

注意：トランザクション内のtfおよびasfフラグの数値は、台帳内のアカウントの「休止中」の状態で設定される値と一致しません。台帳内のアカウントのフラグを読み取るには、AccountRootフラグを参照してください。

### 受信トランザクションのブロック
目的が不明確な受信トランザクションは、顧客が間違いを犯したときにそれを認識し、場合によってはアカウントを返金したり、残高を調整したりする必要がある金融機関にとって不便な場合があります。asfRequireDestおよびasfDisallowXRPフラグは、ユーザーが送金の理由が不明確な方法で資金を送信するのを防ぐことを目的としています。

例えば、宛先タグは通常、金融機関が支払いを受け取ったときにどのホストされた残高にクレジットするかを識別するために使用されます。宛先タグが省略されると、どのアカウントにクレジットするかが不明確になり、返金が必要になるなどの問題が発生する可能性があります。asfRequireDestタグを使用することで、すべての受信支払いに宛先タグが含まれることを保証し、他の人が誤って曖昧な支払いを送信するのを難しくします。

非XAH通貨の不要な受信支払いを防ぐには、それらの通貨で信頼ラインを作成しないことで保護できます。XAHは信頼を必要としないため、asfDisallowXRPフラグはユーザーがXAHをアカウントに送信するのを思いとどまらせるために使用されます。ただし、このフラグはXahauプロトコルでは強制されません。なぜなら、アカウントがXAHを使い果たした場合に使用できなくなる可能性があるからです。代わりに、クライアントアプリケーションは、asfDisallowXRPフラグが有効なアカウントへのXAH支払いを禁止または思いとどまらせるべきです。

すべての受信支払いをブロックしたい場合は、入金認証を有効にできます。これにより、アカウントがリザーブ要件を下回っていない限り、XAHを含むお金を送信するトランザクションが防止されます。

[DisallowIncoming改正][]が有効になっている場合、すべての受信チェック、NFTokenOffers、支払いチャネル、および信頼ラインをブロックするオプションもあります。これらのオブジェクトの受信側にいることは一般的に無害ですが、アカウントを削除するのを妨げる可能性があり、作成したオブジェクトのリストに予期しないオブジェクトが混在することが混乱を招く可能性があります。受信オブジェクトをブロックするには、次のアカウントフラグの1つ以上を使用します：

- asfDisallowIncomingCheck - チェックオブジェクト用
- asfDisallowIncomingNFTOffer - NFTokenOfferオブジェクト用
- asfDisallowIncomingPayChan - 支払いチャネルオブジェクト用
- asfDisallowIncomingTrustline - RippleState（信頼ライン）オブジェクト用

トランザクションがこれらの台帳エントリの1つを作成しようとすると、宛先アカウントに対応するフラグが有効になっている場合、トランザクションは結果コードtecNO_PERMISSIONで失敗します。入金認証とは異なり、これらの設定は一般的に支払いを受け取るのを妨げません。また、この設定を有効にしても、自分でこれらのタイプのオブジェクトを作成するのを妨げることはありません（もちろん、トランザクションの宛先もこの設定を使用している場合を除きます）。

### TransferRate
TransferRateフィールドは、カウンターパーティが発行する通貨を転送するたびに課される手数料を指定します。

HTTPおよびWebSocket APIでは、転送手数料は整数として表され、10億単位が到着するために送信される必要がある金額です。例えば、20％の転送手数料は1200000000という値で表されます。この値は1000000000未満にすることはできません。（それ未満は、トランザクションを送信するためにお金を与えることを示し、悪用可能です。）手数料なしを意味する1000000000のショートカットとして0を指定できます。

詳細は「転送手数料」を参照してください。
